@page
@model MyEshop.Pages.Admin.Roles.EditModel
@{
    ViewData["Title"] = "ویرایش نقش";
    List<Permission> permissions = ViewData["Permissions"] as List<Permission>;
    List<RolePermissions> rolePermissions = ViewData["SelectedPermission"] as List<RolePermissions>;
}


<div class="container">
    <div>
        <div class="col-lg-12">
            <h4 class="page-header">ویرایش نقش</h4>
        </div>
        <hr />
        <!-- /.col-lg-12 -->
    </div>
    <form method="post" asp-page="Edit">
        <div class="row container">
            <div class="col-5">
                <div class="panel panel-default">


                    <div class="form-group">

                        <label class="col-2 mb-3"> عنوان:</label>

                        <input asp-for=Role.Name placeholder="عنوان نقش را وارد کنید" class="form-control" type="text">
                        <input  asp-for=Role.RoleId type="hidden">

                    </div>

                </div>
                <input type="submit" value="ذخیره" class="btn btn-primary mt-3" />
            </div>


            <div class="col-md-4 ms-auto">
                <div class="panel panel-default">
                    <div class="panel-heading mb-3">
                        دسترسی ها
                    </div>
                    <!-- /.panel-heading -->
                    <div class="panel-body">

                        <ul>
                            @foreach (var item in permissions)
                            {
                                <li>
                                    <input type="checkbox" @((rolePermissions.Any(p => p.PermissionId == item.PermissionId)?"checked" : "")) name="SelectedPermission" value="@item.PermissionId">@item.PermissionTitle
                                </li>
                            }
                        </ul>

                    </div>
                    <!-- /.panel-body -->
                </div>
            </div>
        </div>
    </form>
</div>